\section{Case Study}\label{sec:case-study}

\subsection{Case Study Design}

In order to identify the architectural differences between implementations of microservice architectures implemented with REST and GraphQL interfaces, a case study is performed.
To be independant of past design decisisions, the case study is performed on a newly implemented example project.

The example project implements the setting of an online shop as shwon in \autoref{fig:cs-setting}.
The shop keeps its inventory in one or more warehouses.
When the user orders items from the shop, the inventory is checked and the ordered items are reserved.
When the user's bank processes the payment to the shop, the reserved items of the order are shipped to the user.
For this case study, the user's payment instruction to their bank and the bank's processing of the payment is outside of the scope.

\begin{figure}[!htb]
    \centering
    \input{graphics/use-case.tex}
    \caption{Setting of the Case-Study}
    \label{fig:cs-setting}
\end{figure}

In the first step of the case study, this setting is implemented twice with a microservice architecture, first using \ac{REST} and then using GraphQL.
After implementing the case study, the architecture of both implementations is compared.
At this point, a service cut was intentionally not defined to evaluate if the different technologies also suit a different service cut.

Using both implementations of this scenario, the performance can be compared.
This can be done by defining a set of request scenarios (e.g. a user orders 5 items and pays immediatly afterwards).
The resulting load on the system can then be measured in two different ways.
First, the average response time until a user's request is executed can be measured.
This is important as a fast processing of requests is essential to a user's experience of using the system.
Second, the generated load on the internal network connecting the microservices can be measured.
While this case study only utilizes a single network, for geographically distributed microservices, the network can be a bottleneck.

\subsection{Implementation}

To evaluate the architectural differences between implementing a microservice architecture with REST and GraphQL interfaces, a case study was performed.
The case study implements an online shopping scenario, where users can place orders with multiple items~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {1}}}.
When new orders are received, the inventory is checked~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {2}}} if the items are available and then reserved for the user~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {3}}}.
Additionally, the shipping cost is calculated~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {4}}}.
When a payment is received from an external payment provider~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {5}}}, the total of the order is checked~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {6}}} and if the payment suffices, the order is marked ready for shipping~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {7}}}~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {8}}} and the reserved items can be booked out~\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {9}}}.
This process is shown in \autoref{fig:interaction}.

\begin{figure}[!htb]
    \centering
    \input{graphics/interaction.tex}
    \caption{Service Interactions}
    \label{fig:interaction}
\end{figure}

\subsection{Architectural Differences of the Implementations}

\subsection{Performance Comparison}

\subsection{Schema Evolution}

\subsection{Discussion}